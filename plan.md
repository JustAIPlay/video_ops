é’ˆå¯¹ä½ çš„éœ€æ±‚ï¼Œæˆ‘å»ºè®®é‡‡ç”¨ â€œå…¨å±€çŠ¶æ€ç®¡ç† + æ‹¦æˆªå™¨æ¨¡å¼ + æ²‰æµ¸å¼UIåé¦ˆâ€ çš„ç»„åˆæ‹³æ–¹æ¡ˆã€‚
ä»¥ä¸‹æ˜¯å…·ä½“çš„ UI/UX è®¾è®¡ä¸å®ç°å»ºè®®ï¼š
1. å…¨å±€äº¤äº’è®¾è®¡ï¼š "The AI Switch" (AI å¼€å…³)
æˆ‘ä»¬è¦åˆ›é€ ä¸€ç§â€œå¯åŠ¨å¼•æ“â€çš„æ„Ÿè§‰ï¼Œè€Œä¸æ˜¯ç®€å•çš„ checkboxã€‚
ä½ç½®ï¼š é¡¶éƒ¨å¯¼èˆªæ  (Navbar) å³ä¾§ã€‚
å½¢æ€ï¼š ä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å…‰æ•ˆçš„ Toggle Switch (æ»‘å—)ã€‚
ä¼ ç»Ÿæ¨¡å¼ (OFF): ç°è‰²/ç™½è‰²æ‰å¹³é£æ ¼ï¼Œå›¾æ ‡æ˜¾ç¤ºä¸ºâ€œ âš™ï¸ è§„åˆ™å¼•æ“â€ã€‚
æ™ºèƒ½æ¨¡å¼ (ON): åˆ‡æ¢æ—¶ä¼´éšå¾®å°çš„éœ‡åŠ¨åé¦ˆï¼ˆè‹¥æ”¯æŒï¼‰æˆ–éŸ³æ•ˆã€‚UI ä¸»é¢˜è‰²ç¬é—´å‘ç”Ÿå¾®è°ƒï¼ˆä¾‹å¦‚ï¼šè¾¹æ¡†å‡ºç°æµå…‰ã€èƒŒæ™¯å¢åŠ æ·¡æ·¡çš„ç§‘æŠ€è“ç½‘æ ¼ã€æŒ‰é’®å˜æˆæ¸å˜è‰²ï¼‰ã€‚å›¾æ ‡å˜ä¸ºâ€œ ğŸ§  æ™ºèƒ½å¤§è„‘â€ã€‚
åŒæ­¥æœºåˆ¶ï¼š ä½¿ç”¨ React çš„ Context API æˆ– Zustand å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œç¡®ä¿æ— è®ºåœ¨å“ªä¸ªé¡µé¢åˆ‡æ¢ï¼Œå…¨å±€çŠ¶æ€ isSmartMode éƒ½ä¼šåŒæ­¥ã€‚
2. é¡µé¢ Aï¼šæ•°æ®åŒæ­¥é¡µ (Data Sync) â€”â€” Agent 5 çš„èˆå°
åœºæ™¯ï¼š ç”¨æˆ·ç‚¹å‡»â€œåŒæ­¥æ•°æ®â€ã€‚
ä¼ ç»Ÿæ¨¡å¼ï¼š è¿›åº¦æ¡èµ°å®Œ -> å¼¹çª—â€œåŒæ­¥æˆåŠŸâ€ -> åˆ—è¡¨åˆ·æ–°ã€‚
æ™ºèƒ½æ¨¡å¼ (Agent 5 ä»‹å…¥)ï¼š
ç¬¬ä¸€é˜¶æ®µ (æ•°æ®æ¬è¿): è¿›åº¦æ¡èµ°å®Œï¼Œæç¤ºâ€œåŸºç¡€æ•°æ®åŒæ­¥å®Œæˆâ€ã€‚
ç¬¬äºŒé˜¶æ®µ (AI è§‰é†’): ç•Œé¢çªç„¶å˜æš—ï¼Œå¼¹å‡ºä¸€ä¸ªåŠé€æ˜çš„ "AI è¯Šæ–­ç»ˆç«¯ (HUD)" é®ç½©å±‚ã€‚
è§†è§‰æ•ˆæœï¼š
å±å¹•ä¸­å¤®å‡ºç°ç±»ä¼¼ç»ˆç«¯çš„ä»£ç æ»šåŠ¨æ•ˆæœï¼šâ€œæ­£åœ¨æå–ç‰¹å¾...â€ã€â€œæ£€æµ‹åˆ°çˆ†æ¬¾åŸºå› ...â€ã€â€œå¯¹æ¯”å†å²æ•°æ®...â€ã€‚
Agent 5 åˆ†æå®Œä¸€æ¡è§†é¢‘ï¼Œå°±åœ¨åˆ—è¡¨å¯¹åº”çš„è¡Œä¸Šæ‰“ä¸€ä¸ª**â€œå°ç« â€**ï¼ˆåŠ¨ç”»æ•ˆæœï¼‰ï¼šSçº§æ½œåŠ› (é‡‘å…‰)ã€Cçº§å¾…å®š (ç°å…‰)ã€‚
ç»“æœå±•ç¤ºï¼š é®ç½©æ¶ˆå¤±ï¼Œæ•°æ®åˆ—è¡¨ä¸­æ–°å¢ä¸€åˆ—â€œAI è¯Šæ–­â€ï¼Œå±•ç¤ºè¯„åˆ†å’Œç®€çŸ­è¯„è¯­ã€‚
åå°åŠ¨ä½œï¼š Agent 5 å°†ç»“æœé™é»˜å†™å…¥é£ä¹¦ã€‚
3. é¡µé¢ Bï¼šå‘å¸ƒæ’æœŸé¡µ (Schedule) â€”â€” Agent 4 çš„èˆå°
åœºæ™¯ï¼š ç”¨æˆ·ç‚¹å‡»â€œå¼€å§‹è®¡ç®—æ’æœŸâ€ã€‚
ä¼ ç»Ÿæ¨¡å¼ï¼š ç¬é—´ç”Ÿæˆä¸€å¼ æ­»æ¿çš„æ’æœŸè¡¨ã€‚
æ™ºèƒ½æ¨¡å¼ (Agent 4 ä»‹å…¥)ï¼š
è¯»å–é˜¶æ®µï¼š ç³»ç»Ÿæç¤ºâ€œæ­£åœ¨è¯»å– AI è¯Šæ–­æ•°æ®...â€ã€‚
æ€è€ƒé˜¶æ®µï¼š ç•Œé¢å³ä¾§æ»‘å‡ºä¸€ä¸ª "ç­–ç•¥é¢æ¿ (Strategy Sidebar)"ã€‚
é¢æ¿ä¸Šæ˜¾ç¤º Agent 4 çš„æ€è€ƒè¿‡ç¨‹ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰ï¼š
"æ£€æµ‹åˆ° 3 æ¡ S çº§è§†é¢‘..."
"å‘ç° 10-25 20:00 æ—¶æ®µæ‹¥å µï¼Œæ­£åœ¨é¿è®©..."
"è´¦å· A æƒé‡ä¸è¶³ï¼Œæ­£åœ¨é‡æ–°åˆ†é…..."
å¯¹æ¯”å±•ç¤º (Killer Feature):
æ’æœŸè¡¨ç”Ÿæˆåï¼Œå»ºè®®åšä¸€ä¸ª "Before / After" çš„åˆ‡æ¢æˆ–é«˜äº®å±•ç¤ºã€‚
è¢« AI ä¿®æ”¹è¿‡çš„æ’æœŸï¼Œç”¨ç´«è‰²è™šçº¿æ¡†é«˜äº®ã€‚
Hover äº¤äº’ï¼š é¼ æ ‡æ‚¬åœåœ¨ç´«è‰²æ¡†ä¸Šï¼Œæµ®ç°æ°”æ³¡ï¼šâ€œåŸè®¡åˆ’ 14:00 å‘å¸ƒã€‚AI å»ºè®®æ”¹ä¸º 20:00ï¼Œç†ç”±ï¼šSçº§å†…å®¹éœ€åŒ¹é…é»„é‡‘æ™šé«˜å³°ã€‚â€
4. æŠ€æœ¯å®ç°å»ºè®® (React + Zustand)
ä¸ºäº†å®ç°è¿™ä¸ªâ€œåŒæ¨¡åˆ‡æ¢â€ï¼Œä½ ä¸éœ€è¦é‡å†™ä¸¤å¥—é¡µé¢ï¼Œåªéœ€è¦åœ¨ç°æœ‰é€»è¾‘ä¸ŠåŠ ä¸€å±‚â€œæ‹¦æˆªå™¨â€ã€‚
Step 1: å…¨å±€çŠ¶æ€ (src/store/useAppStore.ts)
ä½¿ç”¨ Zustand å¿«é€Ÿå»ºç«‹å…¨å±€å¼€å…³ã€‚
code
TypeScript
import { create } from 'zustand';

interface AppState {
  isSmartMode: boolean;
  toggleMode: () => void;
}

export const useAppStore = create<AppState>((set) => ({
  isSmartMode: false, // é»˜è®¤ä¸ºä¼ ç»Ÿæ¨¡å¼
  toggleMode: () => set((state) => ({ isSmartMode: !state.isSmartMode })),
}));
Step 2: é¡¶éƒ¨å¼€å…³ç»„ä»¶ (src/components/SmartToggle.tsx)
code
Tsx
import { useAppStore } from '../store/useAppStore';

export const SmartToggle = () => {
  const { isSmartMode, toggleMode } = useAppStore();

  return (
    <div className="flex items-center gap-3">
      <span className={`text-sm font-bold ${isSmartMode ? 'text-blue-500' : 'text-gray-500'}`}>
        {isSmartMode ? 'ğŸ§  AI æ™ºèƒ½æ¨¡å¼' : 'âš™ï¸ ä¼ ç»Ÿæ¨¡å¼'}
      </span>
      <button 
        onClick={toggleMode}
        className={`w-14 h-7 rounded-full p-1 transition-all duration-300 ${
          isSmartMode ? 'bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg shadow-blue-500/50' : 'bg-gray-300'
        }`}
      >
        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${
          isSmartMode ? 'translate-x-7' : 'translate-x-0'
        }`} />
      </button>
    </div>
  );
};
Step 3: æ•°æ®åŒæ­¥é¡µé¢çš„æ‹¦æˆªé€»è¾‘ (DataSyncPage.tsx)
code
Tsx
import { useAppStore } from '../store/useAppStore';

const DataSyncPage = () => {
  const { isSmartMode } = useAppStore();

  const handleSyncClick = async () => {
    // 1. æ‰§è¡Œä¼ ç»ŸåŒæ­¥ (ä¸ç®¡æ˜¯å“ªç§æ¨¡å¼éƒ½è¦åš)
    await runTraditionalSync(); 
    
    // 2. æ™ºèƒ½æ¨¡å¼æ‹¦æˆªå™¨
    if (isSmartMode) {
      setShowTerminalOverlay(true); // æ‰“å¼€ç‚«é…·çš„ç»ˆç«¯é®ç½©
      
      try {
        // è°ƒç”¨åç«¯ Agent 5 æ¥å£
        const analysisResults = await fetch('/api/run_agent_5'); 
        // æ¸²æŸ“ AI ç»“æœåˆ°ç•Œé¢...
      } finally {
        setShowTerminalOverlay(false);
      }
    }
  };

  return (
    <div>
       {/* ä¼ ç»Ÿè¡¨æ ¼æ¸²æŸ“... */}
       {/* å¦‚æœæ˜¯æ™ºèƒ½æ¨¡å¼ï¼Œç»™è¡¨æ ¼åŠ ä¸ªç‰¹æ®Šçš„ className æ¥æ”¹å˜æ ·å¼ */}
       <Table className={isSmartMode ? 'cyberpunk-theme' : ''} />
    </div>
  );
};
Step 4: æ’æœŸé¡µé¢çš„åä½œé€»è¾‘ (SchedulePage.tsx)
code
Tsx
const SchedulePage = () => {
  const { isSmartMode } = useAppStore();

  const handleCalculateClick = async () => {
    if (!isSmartMode) {
      // ä¼ ç»Ÿæ¨¡å¼ï¼šç›´æ¥è·‘è§„åˆ™
      runRuleBasedSchedule();
    } else {
      // æ™ºèƒ½æ¨¡å¼ï¼šå‘¼å« Agent 4
      setAgentThinking(true); // æ˜¾ç¤ºå³ä¾§æ€è€ƒé¢æ¿
      
      // æ³¨æ„ï¼šAgent 4 åœ¨åç«¯ä¼šå»è¯» Agent 5 å†™å…¥é£ä¹¦çš„æ•°æ®
      const aiSchedule = await fetch('/api/run_agent_4_planning');
      
      updateScheduleTable(aiSchedule);
      setAgentThinking(false);
    }
  };
};